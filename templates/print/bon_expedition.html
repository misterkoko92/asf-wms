{% extends "print/base_a5.html" %}
{% load static %}

{% block title %}Bon expedition{% endblock %}

{% block extra_style %}
  .doc-block { display: grid; gap: 3mm; margin-top: 2mm; }
  .doc-line { display: flex; align-items: center; flex-wrap: wrap; gap: 4mm; }
  .doc-strong { font-weight: 800; }
  .doc-red { color: #d11; font-weight: 800; }
  .doc-sep { color: #000; font-weight: 700; }
  .doc-fill { display: inline-block; min-width: 28mm; border-bottom: 1px solid #000; height: 4mm; }
  .doc-summary { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6mm; }
  .doc-summary-item { font-weight: 800; }
  .doc-summary-value { border-bottom: 1px solid #000; min-height: 5mm; padding-bottom: 0.5mm; }
  .contact-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 4mm; }
  .contact-block { border: 1px solid #000; padding: 2mm 3mm; font-size: 9pt; }
  .contact-title { font-weight: 800; margin-bottom: 1mm; }
  .contact-grid { display: grid; grid-template-columns: 20mm 1fr; gap: 1mm 2mm; }
  .contact-label { font-weight: 700; }
  .contact-value { border-bottom: 1px solid #000; min-height: 4mm; padding-bottom: 0.5mm; white-space: pre-line; }
  .signature-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10mm; margin-top: 4mm; }
  .signature-box { border-bottom: 1px solid #000; padding-bottom: 2mm; min-height: 8mm; }
  .attestation { margin-top: 4mm; display: grid; gap: 2mm; font-size: 9pt; line-height: 1.3; }
  .attestation-strong { font-weight: 800; }
  .attestation-line { white-space: pre-line; }
  .attestation-signature { display: flex; align-items: center; gap: 6mm; }
  .attestation-stamp { height: 18mm; }
{% endblock %}

{% block body %}
  <div class="doc-block">
    <div class="doc-line">
      <span class="doc-strong">BON D'EXPEDITION</span>
      <span class="doc-sep">/</span>
      <span class="doc-strong">N&#176; <span class="doc-red">{{ shipment_ref }}</span></span>
      <span class="doc-sep">/</span>
      <span class="doc-strong">N&#176; DECLARATION DOUANE</span>
      <span class="doc-fill"></span>
    </div>

    <div class="doc-line">
      <span class="doc-strong">DESTINATION :</span>
      <span>{{ destination_city|default:destination_address }}</span>
      <span class="doc-sep">/</span>
      <span class="doc-strong doc-red">{{ destination_iata|default:"-" }}</span>
      <span class="doc-sep">/</span>
      <span>Date de vol</span>
      <span class="doc-fill"></span>
      <span class="doc-sep">/</span>
      <span>N&#176; Vol</span>
      <span class="doc-fill"></span>
    </div>

    <div class="doc-summary">
      <div>
        <div class="doc-summary-item">NOMBRE DE COLIS</div>
        <div class="doc-summary-value">{{ carton_count }}</div>
      </div>
      <div>
        <div class="doc-summary-item">POIDS TOTAL (KG)</div>
        <div class="doc-summary-value">
          {% if weight_total_g %}
            {{ weight_total_kg|floatformat:2 }}
          {% else %}
            -
          {% endif %}
        </div>
      </div>
      <div>
        <div class="doc-summary-item">TYPE DE COLIS</div>
        <div class="doc-summary-value">{{ type_labels }}</div>
      </div>
    </div>

    <div class="contact-row">
      <div class="contact-block">
        <div class="contact-title">EXPEDITEUR</div>
        <div class="contact-grid">
          <div class="contact-label">Societe</div>
          <div class="contact-value">{{ shipper_info.company|default:"-" }}</div>
          <div class="contact-label">Nom</div>
          <div class="contact-value">{{ shipper_info.person|default:"-" }}</div>
          <div class="contact-label">Adresse</div>
          <div class="contact-value">{{ shipper_info.address|default:"-" }}</div>
          <div class="contact-label">Tel</div>
          <div class="contact-value">{{ shipper_info.phone|default:"-" }}</div>
          <div class="contact-label">Mail</div>
          <div class="contact-value">{{ shipper_info.email|default:"-" }}</div>
        </div>
      </div>
      <div class="contact-block">
        <div class="contact-title">DESTINATAIRE</div>
        <div class="contact-grid">
          <div class="contact-label">Societe</div>
          <div class="contact-value">{{ recipient_info.company|default:"-" }}</div>
          <div class="contact-label">Nom</div>
          <div class="contact-value">{{ recipient_info.person|default:"-" }}</div>
          <div class="contact-label">Adresse</div>
          <div class="contact-value">{{ recipient_info.address|default:"-" }}</div>
          <div class="contact-label">Tel</div>
          <div class="contact-value">{{ recipient_info.phone|default:"-" }}</div>
          <div class="contact-label">Mail</div>
          <div class="contact-value">{{ recipient_info.email|default:"-" }}</div>
        </div>
      </div>
      <div class="contact-block">
        <div class="contact-title">CORRESPONDANT</div>
        <div class="contact-grid">
          <div class="contact-label">Societe</div>
          <div class="contact-value">{{ correspondent_info.company|default:"-" }}</div>
          <div class="contact-label">Nom</div>
          <div class="contact-value">{{ correspondent_info.person|default:"-" }}</div>
          <div class="contact-label">Adresse</div>
          <div class="contact-value">{{ correspondent_info.address|default:"-" }}</div>
          <div class="contact-label">Tel</div>
          <div class="contact-value">{{ correspondent_info.phone|default:"-" }}</div>
          <div class="contact-label">Mail</div>
          <div class="contact-value">{{ correspondent_info.email|default:"-" }}</div>
        </div>
      </div>
    </div>

    <div class="signature-row">
      <div>
        <div class="doc-strong">Signature ASF</div>
        <div class="signature-box"></div>
      </div>
      <div>
        <div class="doc-strong">Signature CDB</div>
        <div class="signature-box"></div>
      </div>
    </div>

    <div class="attestation">
      <div class="attestation-line">&nbsp;</div>
      <div class="attestation-strong">ATTESTATION DE DONATION</div>
      <div class="attestation-line">
        Je soussign&eacute;, M. Edouard Gonnu, Responsable de la Messagerie M&eacute;dicale, de l'association Aviation Sans Fronti&egrave;res
      </div>
      <div class="attestation-line">
        Atteste que le(s) colis faisant l'objet de la pr&eacute;sente exp&eacute;dition par l'interm&eacute;diaire
        d'Aviation Sans Fronti&egrave;res est (sont) un (des) don(s) de l'Exp&eacute;diteur au Destinataire mentionn&eacute;s ci-dessous.
        Le correspondant est le seul autoris&eacute; &agrave; r&eacute;cup&eacute;rer ces colis pour le compte du Destinataire.
      </div>
      <div class="attestation-line">
        Ces colis ne contiennent que du mat&eacute;riel m&eacute;dical et chirurgical envoy&eacute;s &agrave; titre humanitaire.
        Ces articles m&eacute;dicaux sont pour la sant&eacute; humaine et ne sont pas destin&eacute;s &agrave; &ecirc;tre revendus.
      </div>
      <div class="attestation-line attestation-strong">
        Ils ne sont pas soumis aux biens &agrave; double usage - sans valeur commerciale :
        Valeur uniquement pour la douane : 1.00 &euro; -
      </div>
      <div class="attestation-line">
        Fait &agrave; Roissy, France, le {{ document_date|date:"d/m/y" }}
      </div>
      <div class="attestation-signature">
        <div class="attestation-strong">Signature et cachet</div>
        <img class="attestation-stamp" src="{% static 'scan/cachet.png' %}" alt="Cachet">
      </div>
    </div>
  </div>
{% endblock %}
